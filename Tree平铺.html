<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>

  <body></body>
  <script>
    const tree = [
      {
        id: 1,
        name: "部门1",
        pid: 0,
        children: [
          {
            id: 2,
            name: "部门2",
            pid: 1,
            children: [],
          },
          {
            id: 3,
            name: "部门3",
            pid: 1,
            children: [
              {
                id: 4,
                name: "部门4",
                pid: 3,
                children: [
                  {
                    id: 5,
                    name: "部门5",
                    pid: 4,
                    children: [],
                  },
                ],
              },
            ],
          },
        ],
      },
    ];

    
    let res = [];

    function treeTurnflat(tree) {

      tree.forEach((node) => {
        console.log("node", node);

        res.push(node);

        if (Object.prototype.toString.call(node.children) == "[object Array]") {
          treeTurnflat(node.children);
        }
      });
    }

    treeTurnflat(tree);

    console.log("res", res);
  </script>
</html>
